<%- include('../partials/header') %>

<section class="panel">
  <div class="panel-header"><h1>Historial de Temperaturas - <%= paciente.nombre %> <%= paciente.apellidos %></h1></div>
  <div class="panel-body">
      <% if (temperaturas && temperaturas.length) { %>
      <table class="table">
        <thead>
          <tr><th>Fecha</th><th>Temperatura</th><th>Unidad</th><th>Equivalente</th><th>Estado</th><th>Acciones</th></tr>
        </thead>
        <tbody>
          <% temperaturas.forEach(function(t){ %>
            <tr>
              <td><%= t.fechaDisplay || 'Fecha desconocida' %></td>
              <td><%= t.temperatura %></td>
              <td><%= t.unidad %></td>
              <td>
                <%= t.equivalente %> <%= t.unidad === 'celsius' ? '°F' : '°C' %>
              </td>
              <td>
                <% if (t.estado === 'normal') { %>
                  <span class="badge badge-normal">Normal</span>
                <% } else if (t.estado === 'fiebre') { %>
                  <span class="badge badge-fever">Fiebre</span>
                <% } else { %>
                  <span class="badge badge-highfever">Fiebre alta</span>
                <% } %>
              </td>
              <td class="actions">
                <a class="btn btn-sm" href="/termometro/editar/<%= t.id %>">Editar</a>
                <form class="inline-form" action="/termometro/<%= t.id %>?_method=DELETE" method="POST">
                  <button class="btn btn-sm btn-danger" type="submit">Borrar</button>
                </form>
              </td>
            </tr>
          <% }) %>
        </tbody>
      </table>
    <% } else { %>
      <p>No hay registros de temperatura.</p>
    <% } %>
    <p><a class="btn" href="/termometro/<%= paciente.id %>/crear">Registrar temperatura</a></p>
  </div>
</section>

<%- include('../partials/footer') %>
